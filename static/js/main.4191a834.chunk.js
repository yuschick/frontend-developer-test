(this["webpackJsonpfrontend-developer-test"]=this["webpackJsonpfrontend-developer-test"]||[]).push([[0],{41:function(e,t,a){e.exports=a(51)},51:function(e,t,a){"use strict";a.r(t);var n=a(12),r=a(0),i=a.n(r),l=a(16),c=a.n(l),o=a(13),d=a(19),s=a.n(d),u=a(23),f=a(8),m=a(10),b=a(77),p=a(79),g=a(70),h=a(71),w=a(72),j=a(73),v=a(74),O=a(75),y=a(80),V=a(76),E=a(78),D=a(66),k=a(68),x=a(69),S=a(5);function T(){var e=Object(n.a)(["\n  display: grid;\n  grid-gap: var(--spacing-two);\n  margin: var(--spacing-two) 0;\n  place-items: center;\n"]);return T=function(){return e},e}var B=function(e){var t=e.fetch,a=e.loading,n=e.error,l=e.complete,c=Object(r.useRef)(!1);return Object(r.useEffect)((function(){c||(c.current=!0)}),[c]),i.a.createElement(C,{"data-test-id":"table-actions"},c&&a?i.a.createElement(D.a,{"data-test-id":"table-actions-spinner"}):i.a.createElement(r.Fragment,null,n&&i.a.createElement(k.a,{color:"error",role:"alert","data-test-id":"table-actions-text-error"},"We had problems fetching your data. Please try again."),l?i.a.createElement(k.a,{"data-test-id":"table-actions-text-complete"},"All historical data shown."):i.a.createElement(x.a,{variant:"contained",color:"primary",onClick:t,"data-test-id":"table-actions-button-fetch"},n?"Retry":"Load more")))},C=o.b.div(T());B.props={fetch:S.func.isRequired,loading:S.bool.isRequired,error:S.bool.isRequired,complete:S.bool.isRequired};var A=B;function N(){var e=Object(n.a)(["\n  clip: rect(0 0 0 0);\n  clip-path: inset(50%);\n  height: 1px;\n  overflow: hidden;\n  position: absolute;\n  white-space: nowrap;\n  width: 1px;\n"]);return N=function(){return e},e}var P,M=o.b.span(N()),z=function(e){var t=e.as,a=e.children;return i.a.createElement(M,{as:t},a)},J=a(11),R=Object.freeze({asc:"asc",desc:"desc"}),q=Object.freeze((P={},Object(J.a)(P,R.asc,R.desc),Object(J.a)(P,R.desc,R.asc),P)),U=Object(b.a)({table:{minWidth:650}}),F=function(e){var t=e.fetchData,a=e.loading,n=e.error,l=e.complete,c=e.summary,o=e.initialSortBy,d=e.initialSort,s=e.title,u=e.data,b=Object(r.useState)([]),k=Object(f.a)(b,2),x=k[0],S=k[1],T=Object(r.useState)(o),B=Object(f.a)(T,2),C=B[0],N=B[1],P=Object(r.useState)(d),M=Object(f.a)(P,2),J=M[0],F=M[1],I=U();return Object(r.useEffect)((function(){if(u.rows.length&&C){var e=Object(m.a)(u.rows).sort((function(e,t){var a=e[C].value.toString(),n=t[C].value.toString();return J===R.desc?n.localeCompare(a):a.localeCompare(n)}));S(e)}}),[u,J,C]),i.a.createElement(r.Fragment,null,i.a.createElement(g.a,{component:h.a,summary:c,"data-test-id":"table-data"},i.a.createElement(w.a,{className:I.table},i.a.createElement(z,{as:"caption"},s),i.a.createElement(j.a,null,i.a.createElement(v.a,null,u.cols.map((function(e){return i.a.createElement(O.a,{key:Object(p.a)()},e.sortable?i.a.createElement(y.a,{active:C===e.id,disabled:a,direction:J,onClick:function(){C!==e.id&&N(e.id),F(q[J])},"data-test-id":"table-data-button-sort"},e.label,i.a.createElement(z,null,"Table sorted","ascending",".")):e.label)})))),i.a.createElement(V.a,null,!x.length&&a&&i.a.createElement(v.a,null,i.a.createElement(O.a,{colSpan:u.cols.length},i.a.createElement(E.a,{display:"flex",justifyContent:"center",py:2},i.a.createElement(D.a,{"data-test-id":"table-data-spinner"})))),x.map((function(e){return i.a.createElement(v.a,{key:Object(p.a)()},Object.keys(e).map((function(t,a){return i.a.createElement(O.a,{key:Object(p.a)(),"data-test-id":"table-data-cell-".concat(u.cols[a].id)},e[t].label)})))}))))),!!u.rows.length&&i.a.createElement(A,{fetch:t,loading:a,error:n,complete:l}))},I=[{id:"e28d290a-a2f2-48c2-9001-ff43884e271b",timestamp:new Date("2020/2/14").getTime(),diff:[{field:"name",oldValue:"John",newValue:"Bruce"}]},{id:"8bd0166f-f0c6-48fd-9fcd-a17e76eb1e92",timestamp:new Date("2020/2/15").getTime(),diff:[{field:"name",oldValue:"Bruce",newValue:"Nick"}]},{id:"0a75a2b3-be64-4aeb-ba4c-8ddb913791ac",timestamp:new Date("2020/2/16").getTime(),diff:[{field:"name",oldValue:"Nick",newValue:"Michel"}]},{id:"bf008d15-3d34-422e-9041-039c59d9ed3d",timestamp:new Date("2020/2/17").getTime(),diff:[{field:"name",oldValue:"Michel",newValue:"Michael"}]},{id:"2a83c13c-c040-4672-9b7b-c004ce614264",timestamp:new Date("2020/2/18").getTime(),diff:[{field:"name",oldValue:"Michael",newValue:"Constantine Prescott Nathaniel Jr."}]},{id:"bb177085-7340-4cf7-a892-f436f20951e2",timestamp:new Date("2020/2/19").getTime(),diff:[{field:"name",oldValue:"Constantine Prescott Nathaniel Jr.",newValue:"Constantine Prescott Nathaniel Sr."}]},{id:"67f06020-95b3-484d-8713-36584c79e94a",timestamp:new Date("2020/2/22").getTime(),diff:[{field:"name",oldValue:"Constantine P. N.",newValue:"Joe"}]},{id:"57c1fd5d-a11c-433c-8820-a79bbffe6e60",timestamp:new Date("2020/2/23").getTime(),diff:[{field:"name",oldValue:"Joe",newValue:"Mo"}]},{id:"e9bccea8-bb28-4d0e-9bac-4c09122ad5b4",timestamp:new Date("2020/2/20").getTime(),diff:[{field:"name",oldValue:"Constantine Prescott Nathaniel Sr.",newValue:"Constantine P. N. Sr."}]},{id:"08283466-883a-4506-90ac-ab85c3f27ab3",timestamp:new Date("2020/2/21").getTime(),diff:[{field:"name",oldValue:"Constantine P. N. Sr.",newValue:"Constantine P. N."}]}],W=[{id:"01fa742c-b2d0-416a-9394-a0a5dc8bc13e",timestamp:new Date("2020/2/15").getTime(),diff:[{field:"name",oldValue:"Angrier Birds",newValue:"Angry Birds 2"}]},{id:"7ba38998-0247-4de9-a3d8-e20cf736e834",timestamp:new Date("2020/2/14").getTime(),diff:[{field:"name",oldValue:"Angry Birds",newValue:"Angrier Birds"}]},{id:"c72d77f1-6e0b-473e-a600-7295d0822e54",timestamp:new Date("2020/2/16").getTime(),diff:[{field:"name",oldValue:"Angry Birds 2",newValue:"Angry Birds 2: The sequel"}]},{id:"90b9e1ad-7556-44f8-8278-c723824de782",timestamp:new Date("2020/2/17").getTime(),diff:[{field:"name",oldValue:"Angry Birds 2: The sequel",newValue:"Angry Birds 2: The return of the birds"}]},{id:"fcd064f9-687e-4bd4-9c8f-93361610cc58",timestamp:new Date("2020/2/18").getTime(),diff:[{field:"name",oldValue:"Angry Birds 2: The return of the birds",newValue:"Angry Birds 2"}]}],L=function(e,t){return function(){return new Promise((function(a,n){var r=setTimeout((function(){e+=1;var i=3*(Math.ceil(e/2)-1),l=3*Math.ceil(e/2),c=t.length,o=i<c;return clearTimeout(r),e%2===0?n({code:500,error:"Uknown error"}):a({code:200,data:t.slice(i,l),limit:3,offset:o?i:c,total:c})}),2e3)}))}},G={getProjectsDiff:L(0,W),getUsersDiff:L(0,I)},H=a(35),K=function(e){return e.length?e.map((function(e){return{date:{label:Object(H.a)(e.timestamp,"yyyy-MM-d"),value:e.timestamp},id:{label:e.id,value:e.id},old:{label:e.diff[0].oldValue,value:e.diff[0].oldValue},new:{label:e.diff[0].newValue,value:e.diff[0].newValue}}})):[]},Q=function(){var e=Object(r.useState)(!1),t=Object(f.a)(e,2),a=t[0],n=t[1],l=Object(r.useState)(!1),c=Object(f.a)(l,2),o=c[0],d=c[1],m=Object(r.useState)(!1),b=Object(f.a)(m,2),p=b[0],g=b[1],h=Object(r.useState)([]),w=Object(f.a)(h,2),j=w[0],v=w[1],O=Object(r.useCallback)(Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),g(!1),e.prev=2,e.next=5,G.getUsersDiff();case 5:(t=e.sent).data.length?v((function(e){return e.concat(t.data)})):d(!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),g(!!e.t0);case 12:return e.prev=12,n(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])}))),[]);return Object(r.useEffect)((function(){j.length||O()}),[j,O]),i.a.createElement(F,{fetchData:O,title:"Users table",summary:"A table of historical user updates",loading:a,error:p,complete:o,initialSortBy:"date",initialSort:R.desc,data:{cols:[{id:"date",label:"Date",sortable:!0},{id:"id",label:"User ID",sortable:!1},{id:"old",label:"Old Value",sortable:!1},{id:"new",label:"New Value",sortable:!1}],rows:K(j)}})},X=function(){var e=Object(r.useState)(!1),t=Object(f.a)(e,2),a=t[0],n=t[1],l=Object(r.useState)(!1),c=Object(f.a)(l,2),o=c[0],d=c[1],m=Object(r.useState)(!1),b=Object(f.a)(m,2),p=b[0],g=b[1],h=Object(r.useState)([]),w=Object(f.a)(h,2),j=w[0],v=w[1],O=Object(r.useCallback)(Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!0),g(!1),e.prev=2,e.next=5,G.getProjectsDiff();case 5:(t=e.sent).data.length?v((function(e){return e.concat(t.data)})):d(!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),g(!!e.t0);case 12:return e.prev=12,n(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])}))),[]);return Object(r.useEffect)((function(){j.length||O()}),[j,O]),i.a.createElement(F,{fetchData:O,title:"Projects table",summary:"A table of historical project updates",loading:a,error:p,complete:o,initialSortBy:"date",initialSort:R.desc,data:{cols:[{id:"date",label:"Date",sortable:!0},{id:"id",label:"User ID",sortable:!1},{id:"old",label:"Old Value",sortable:!1},{id:"new",label:"New Value",sortable:!1}],rows:K(j)}})};function Y(){var e=Object(n.a)(["\n  display: grid;\n  grid-gap: var(--spacing-three);\n  padding: var(--spacing-two) var(--spacing-three);\n"]);return Y=function(){return e},e}var Z=o.b.main(Y()),$=function(){return i.a.createElement(Z,{"data-test-id":"app"},i.a.createElement(Q,{"data-test-class":"app-table"}),i.a.createElement(X,{"data-test-class":"app-table"}))};function _(){var e=Object(n.a)(["\n  :root {\n    --spacing-unit: 8px;\n    --spacing-one: 8px;\n    --spacing-two: 16px;\n    --spacing-three: 24px;\n\n    --color-light-primary: #e6e6e6;\n    --color-dark-primary: #121212;\n\n    --font-primary: 'Raleway', sans-serif;\n  }\n\n  * {\n    border: 0;\n    box-sizing: border-box;\n    font-size: 100%;\n    margin: 0;\n    padding: 0;\n\t  vertical-align: baseline\n  }\n\n  html, body {\n    -webkit-font-smoothing: antialiased;\n    -webkit-text-size-adjust: none;\n\n    background: var(--color-light-primary);\n    background-image: url(\"https://www.transparenttextures.com/patterns/dark-dotted-2.png\");\n    backface-visibility: hidden;\n    color: --color-dark-primary;\n    font-family: var(--font-primary);\n    font-size: min(max(16px, 2vw), 18px);\n    font-weight: 400;\n    line-height: 1.75;\n\n    @supports(font-size: clamp(1rem, 1vw, 1rem)) {\n      font-size: clamp(16px, 2vw, 18px);\n    }\n  }\n"]);return _=function(){return e},e}var ee=Object(o.a)(_());c.a.render(i.a.createElement(r.Fragment,null,i.a.createElement(ee,null),i.a.createElement($,null)),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.4191a834.chunk.js.map